{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport AWS_Ops from \"../../utils/AWS_S3\";\nimport \"../../styles/floatingButtonList.scss\";\nimport FloatButton from \"./FloatButton\";\nimport { Message } from \"../../utils/Message\";\n\nvar FloatingButtonList = function FloatingButtonList(_ref) {\n  var onSend = _ref.onSend,\n      isVisible = _ref.isVisible,\n      toggleVisibility = _ref.toggleVisibility,\n      setProgress = _ref.setProgress;\n  var animate;\n  if (isVisible) animate = \"animate-reveal\";else animate = \"animate-hide\";\n\n  var uploadFile = function uploadFile(event, type) {\n    var file = event.target.files[0];\n    if (!file) return; // creating an instance of AWS oprations class to use its s3 upload\n\n    var up = new AWS_Ops();\n\n    var _up$uploadToS = up.uploadToS3(file),\n        uploadHandler = _up$uploadToS.uploadHandler,\n        url = _up$uploadToS.url;\n\n    uploadHandler.on(\"httpUploadProgress\", function (evt) {\n      setProgress(Math.round(evt.loaded / evt.total * 100));\n    }).promise().then(function () {\n      return onSend(url, file.name, type);\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    })[\"finally\"](function () {\n      return setProgress(0);\n    }); // this will make uploading progress bar hidden\n  };\n\n  return __jsx(\"ul\", {\n    className: \"float-menu \".concat(animate)\n  }, __jsx(\"li\", {\n    className: \"mb-3\"\n  }, __jsx(FloatButton, {\n    htmlFor: \"image-upload\",\n    type: Message.IMAGE,\n    icon: \"fa fa-image\",\n    accept: \"image/*\",\n    onClick: toggleVisibility,\n    onChange: uploadFile,\n    color: \"#f05454\"\n  })), __jsx(\"li\", {\n    className: \"mb-3\"\n  }, __jsx(FloatButton, {\n    htmlFor: \"video-upload\",\n    icon: \"fa fa-play\",\n    type: Message.VIDEO,\n    accept: \"video/*\",\n    onClick: toggleVisibility,\n    onChange: uploadFile,\n    color: \"#a685e2\"\n  })), __jsx(\"li\", {\n    className: \"mb-4\"\n  }, __jsx(FloatButton, {\n    htmlFor: \"doc-upload\",\n    icon: \"fa fa-file\",\n    type: Message.FILE,\n    accept: \".doc,.docx,.xml,.pdf,.txt\",\n    onClick: toggleVisibility,\n    onChange: uploadFile,\n    color: \"#70af85\"\n  })));\n};\n\n_c = FloatingButtonList;\nexport default FloatingButtonList;\n\nvar _c;\n\n$RefreshReg$(_c, \"FloatingButtonList\");","map":{"version":3,"names":["AWS_Ops","FloatButton","Message","FloatingButtonList","onSend","isVisible","toggleVisibility","setProgress","animate","uploadFile","event","type","file","target","files","up","uploadToS3","uploadHandler","url","on","evt","Math","round","loaded","total","promise","then","name","err","console","log","IMAGE","VIDEO","FILE"],"sources":["C:/Users/teldeeb/kitchen/Anomly/components/Chat/FloatingButtonList.js"],"sourcesContent":["import AWS_Ops from \"../../utils/AWS_S3\";\r\nimport \"../../styles/floatingButtonList.scss\";\r\nimport FloatButton from \"./FloatButton\";\r\nimport { Message } from \"../../utils/Message\";\r\n\r\nconst FloatingButtonList = ({\r\n    onSend,\r\n    isVisible,\r\n    toggleVisibility,\r\n    setProgress,\r\n}) => {\r\n    let animate;\r\n    if (isVisible) animate = \"animate-reveal\";\r\n    else animate = \"animate-hide\";\r\n\r\n    const uploadFile = (event, type) => {\r\n        const file = event.target.files[0];\r\n        if (!file) return;\r\n\r\n        // creating an instance of AWS oprations class to use its s3 upload\r\n        let up = new AWS_Ops();\r\n        const { uploadHandler, url } = up.uploadToS3(file);\r\n\r\n        uploadHandler\r\n            .on(\"httpUploadProgress\", (evt) => {\r\n                setProgress(Math.round((evt.loaded / evt.total) * 100));\r\n            })\r\n            .promise()\r\n            .then(() => onSend(url, file.name, type))\r\n            .catch((err) => console.log(err))\r\n            .finally(() => setProgress(0)); // this will make uploading progress bar hidden\r\n    };\r\n\r\n    return (\r\n        <ul className={`float-menu ${animate}`}>\r\n            <li className=\"mb-3\">\r\n                <FloatButton\r\n                    htmlFor={\"image-upload\"}\r\n                    type={Message.IMAGE}\r\n                    icon={\"fa fa-image\"}\r\n                    accept={\"image/*\"}\r\n                    onClick={toggleVisibility}\r\n                    onChange={uploadFile}\r\n                    color={\"#f05454\"}\r\n                />\r\n            </li>\r\n            <li className=\"mb-3\">\r\n                <FloatButton\r\n                    htmlFor={\"video-upload\"}\r\n                    icon={\"fa fa-play\"}\r\n                    type={Message.VIDEO}\r\n                    accept={\"video/*\"}\r\n                    onClick={toggleVisibility}\r\n                    onChange={uploadFile}\r\n                    color={\"#a685e2\"}\r\n                />\r\n            </li>\r\n            <li className=\"mb-4\">\r\n                <FloatButton\r\n                    htmlFor={\"doc-upload\"}\r\n                    icon={\"fa fa-file\"}\r\n                    type={Message.FILE}\r\n                    accept={\".doc,.docx,.xml,.pdf,.txt\"}\r\n                    onClick={toggleVisibility}\r\n                    onChange={uploadFile}\r\n                    color={\"#70af85\"}\r\n                />\r\n            </li>\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default FloatingButtonList;\r\n"],"mappings":";;AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,OAAO,sCAAP;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,OAAT,QAAwB,qBAAxB;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,OAKrB;EAAA,IAJFC,MAIE,QAJFA,MAIE;EAAA,IAHFC,SAGE,QAHFA,SAGE;EAAA,IAFFC,gBAEE,QAFFA,gBAEE;EAAA,IADFC,WACE,QADFA,WACE;EACF,IAAIC,OAAJ;EACA,IAAIH,SAAJ,EAAeG,OAAO,GAAG,gBAAV,CAAf,KACKA,OAAO,GAAG,cAAV;;EAEL,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAQC,IAAR,EAAiB;IAChC,IAAMC,IAAI,GAAGF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;IACA,IAAI,CAACF,IAAL,EAAW,OAFqB,CAIhC;;IACA,IAAIG,EAAE,GAAG,IAAIf,OAAJ,EAAT;;IACA,oBAA+Be,EAAE,CAACC,UAAH,CAAcJ,IAAd,CAA/B;IAAA,IAAQK,aAAR,iBAAQA,aAAR;IAAA,IAAuBC,GAAvB,iBAAuBA,GAAvB;;IAEAD,aAAa,CACRE,EADL,CACQ,oBADR,EAC8B,UAACC,GAAD,EAAS;MAC/Bb,WAAW,CAACc,IAAI,CAACC,KAAL,CAAYF,GAAG,CAACG,MAAJ,GAAaH,GAAG,CAACI,KAAlB,GAA2B,GAAtC,CAAD,CAAX;IACH,CAHL,EAIKC,OAJL,GAKKC,IALL,CAKU;MAAA,OAAMtB,MAAM,CAACc,GAAD,EAAMN,IAAI,CAACe,IAAX,EAAiBhB,IAAjB,CAAZ;IAAA,CALV,WAMW,UAACiB,GAAD;MAAA,OAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT;IAAA,CANX,aAOa;MAAA,OAAMrB,WAAW,CAAC,CAAD,CAAjB;IAAA,CAPb,EARgC,CAeI;EACvC,CAhBD;;EAkBA,OACI;IAAI,SAAS,uBAAgBC,OAAhB;EAAb,GACI;IAAI,SAAS,EAAC;EAAd,GACI,MAAC,WAAD;IACI,OAAO,EAAE,cADb;IAEI,IAAI,EAAEN,OAAO,CAAC6B,KAFlB;IAGI,IAAI,EAAE,aAHV;IAII,MAAM,EAAE,SAJZ;IAKI,OAAO,EAAEzB,gBALb;IAMI,QAAQ,EAAEG,UANd;IAOI,KAAK,EAAE;EAPX,EADJ,CADJ,EAYI;IAAI,SAAS,EAAC;EAAd,GACI,MAAC,WAAD;IACI,OAAO,EAAE,cADb;IAEI,IAAI,EAAE,YAFV;IAGI,IAAI,EAAEP,OAAO,CAAC8B,KAHlB;IAII,MAAM,EAAE,SAJZ;IAKI,OAAO,EAAE1B,gBALb;IAMI,QAAQ,EAAEG,UANd;IAOI,KAAK,EAAE;EAPX,EADJ,CAZJ,EAuBI;IAAI,SAAS,EAAC;EAAd,GACI,MAAC,WAAD;IACI,OAAO,EAAE,YADb;IAEI,IAAI,EAAE,YAFV;IAGI,IAAI,EAAEP,OAAO,CAAC+B,IAHlB;IAII,MAAM,EAAE,2BAJZ;IAKI,OAAO,EAAE3B,gBALb;IAMI,QAAQ,EAAEG,UANd;IAOI,KAAK,EAAE;EAPX,EADJ,CAvBJ,CADJ;AAqCH,CAjED;;KAAMN,kB;AAmEN,eAAeA,kBAAf"},"metadata":{},"sourceType":"module"}