{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useRef, useEffect, useContext } from \"react\";\nimport \"../../styles/chatmessagesendform.scss\";\nimport { UserContext } from \"./ChatHome\";\nimport { Message, TextMessage, FileMessage } from \"../../utils/Message\";\nimport FloatingButtonList from \"./FloatingButtonList\";\n\nconst ChatMessageSendForm = ({\n  handleMessageSend,\n  setProgress\n}) => {\n  // current user\n  const userInfo = useContext(UserContext);\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"\");\n  const {\n    0: error,\n    1: setError\n  } = useState(\"\");\n  const {\n    0: isFloatBtnVisible,\n    1: setFloatBtnVisible\n  } = useState(false);\n  const chatInputRef = useRef(null);\n  useEffect(() => {\n    chatInputRef.current.focus();\n  });\n  useEffect(() => {\n    if (message.trim() !== \"\") setError(\"\");\n  }, [message]); // handles text messages\n\n  const onSendText = event => {\n    event.preventDefault();\n    const messageText = message.trim();\n    const username = userInfo ? userInfo.username : \"\";\n\n    if (messageText !== \"\") {\n      handleMessageSend(new TextMessage(username, messageText, Message.TEXT));\n      setMessage(\"\");\n      chatInputRef.current.focus();\n    } else {\n      setError(\"error\");\n    }\n  }; // handles file messages\n\n\n  const onSendFile = (url, fileName, type) => {\n    const username = userInfo ? userInfo.username : \"\";\n    handleMessageSend(new FileMessage(username, url, fileName, type));\n  };\n\n  const toggleFloatBtnVisibility = () => {\n    setFloatBtnVisible(prevState => !prevState);\n  };\n\n  return __jsx(\"div\", {\n    className: \"chatsend-form align-self-stretch\"\n  }, __jsx(\"form\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    onSubmit: onSendText\n  }, __jsx(\"div\", {\n    className: \"attachment-menu\"\n  }, __jsx(FloatingButtonList, {\n    onSend: onSendFile,\n    isVisible: isFloatBtnVisible,\n    toggleVisibility: toggleFloatBtnVisibility,\n    setProgress: setProgress\n  }), __jsx(\"span\", {\n    className: \"circular-btn\",\n    onClick: toggleFloatBtnVisibility\n  }, __jsx(\"i\", {\n    className: \"fa fa-paperclip\"\n  }))), __jsx(\"div\", {\n    className: \"flex-grow-1\"\n  }, __jsx(\"input\", {\n    className: `form-control ${error}`,\n    ref: chatInputRef,\n    type: \"text\",\n    placeholder: \"Type your message here...\",\n    autoComplete: \"off\",\n    value: message,\n    onChange: e => setMessage(e.target.value)\n  })), __jsx(\"button\", {\n    className: \"btn btn-secondary ml-1\",\n    type: \"submit\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-paper-plane\"\n  }))));\n};\n\nexport default ChatMessageSendForm;","map":{"version":3,"names":["useState","useRef","useEffect","useContext","UserContext","Message","TextMessage","FileMessage","FloatingButtonList","ChatMessageSendForm","handleMessageSend","setProgress","userInfo","message","setMessage","error","setError","isFloatBtnVisible","setFloatBtnVisible","chatInputRef","current","focus","trim","onSendText","event","preventDefault","messageText","username","TEXT","onSendFile","url","fileName","type","toggleFloatBtnVisibility","prevState","e","target","value"],"sources":["C:/Users/teldeeb/kitchen/Anomly/components/Chat/ChatMessageSendForm.js"],"sourcesContent":["import { useState, useRef, useEffect, useContext } from \"react\";\r\nimport \"../../styles/chatmessagesendform.scss\";\r\nimport { UserContext } from \"./ChatHome\";\r\nimport { Message, TextMessage, FileMessage } from \"../../utils/Message\";\r\nimport FloatingButtonList from \"./FloatingButtonList\";\r\n\r\nconst ChatMessageSendForm = ({ handleMessageSend, setProgress }) => {\r\n    // current user\r\n    const userInfo = useContext(UserContext);\r\n\r\n    const [message, setMessage] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [isFloatBtnVisible, setFloatBtnVisible] = useState(false);\r\n    const chatInputRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        chatInputRef.current.focus();\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (message.trim() !== \"\") setError(\"\");\r\n    }, [message]);\r\n\r\n    // handles text messages\r\n    const onSendText = (event) => {\r\n        event.preventDefault();\r\n        const messageText = message.trim();\r\n        const username = userInfo ? userInfo.username : \"\";\r\n\r\n        if (messageText !== \"\") {\r\n            handleMessageSend(\r\n                new TextMessage(username, messageText, Message.TEXT)\r\n            );\r\n            setMessage(\"\");\r\n            chatInputRef.current.focus();\r\n        } else {\r\n            setError(\"error\");\r\n        }\r\n    };\r\n\r\n    // handles file messages\r\n    const onSendFile = (url, fileName, type) => {\r\n        const username = userInfo ? userInfo.username : \"\";\r\n\r\n        handleMessageSend(new FileMessage(username, url, fileName, type));\r\n    };\r\n\r\n    const toggleFloatBtnVisibility = () => {\r\n        setFloatBtnVisible((prevState) => !prevState);\r\n    };\r\n\r\n    return (\r\n        <div className=\"chatsend-form align-self-stretch\">\r\n            <form\r\n                className=\"d-flex justify-content-center align-items-center\"\r\n                onSubmit={onSendText}>\r\n                <div className=\"attachment-menu\">\r\n                    <FloatingButtonList\r\n                        onSend={onSendFile}\r\n                        isVisible={isFloatBtnVisible}\r\n                        toggleVisibility={toggleFloatBtnVisibility}\r\n                        setProgress={setProgress}\r\n                    />\r\n                    <span\r\n                        className=\"circular-btn\"\r\n                        onClick={toggleFloatBtnVisibility}>\r\n                        <i className=\"fa fa-paperclip\"></i>\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"flex-grow-1\">\r\n                    <input\r\n                        className={`form-control ${error}`}\r\n                        ref={chatInputRef}\r\n                        type=\"text\"\r\n                        placeholder=\"Type your message here...\"\r\n                        autoComplete=\"off\"\r\n                        value={message}\r\n                        onChange={(e) => setMessage(e.target.value)}\r\n                    />\r\n                </div>\r\n                <button className=\"btn btn-secondary ml-1\" type=\"submit\">\r\n                    <i className=\"fas fa-paper-plane\"></i>\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatMessageSendForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}