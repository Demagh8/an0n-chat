{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useRef, useState } from \"react\";\nimport ChatMessage from \"./ChatMessage\";\nimport ChatMessageSendForm from \"./ChatMessageSendForm\";\nimport ChatSidePanel from \"./ChatSidePanel\";\nimport \"../../styles/chatSection.scss\";\nimport ProgressBar from \"../ProgressBar\";\n\nvar ChatSection = function ChatSection(_ref) {\n  _s();\n\n  var onSend = _ref.onSend,\n      roomUsers = _ref.roomUsers,\n      messages = _ref.messages,\n      onLeave = _ref.onLeave;\n\n  var _useState = useState(true),\n      isSidePanelVisible = _useState[0],\n      setSidePanelVisibility = _useState[1];\n\n  var _useState2 = useState(\"up\"),\n      arrowDirection = _useState2[0],\n      setArrowDirection = _useState2[1];\n\n  var _useState3 = useState(0),\n      progress = _useState3[0],\n      setProgress = _useState3[1];\n\n  var ChatContainerEndRef = useRef(null);\n  useEffect(function () {\n    window.addEventListener(\"resize\", function () {\n      window.innerWidth >= 575 ? setSidePanelVisibility(true) : \"\";\n    }); // returned function will be called on component unmount\n\n    return function () {\n      window.removeEventListener(\"resize\", function () {});\n    };\n  }, []);\n  useEffect(function () {\n    if (isSidePanelVisible) setArrowDirection(\"up\");else setArrowDirection(\"down\");\n  }, [isSidePanelVisible]);\n\n  var handleMessageSend = function handleMessageSend(message) {\n    // scroll to end of message window\n    ChatContainerEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n    onSend(message);\n  };\n\n  return __jsx(\"div\", {\n    className: \"chat-section container\"\n  }, __jsx(\"div\", {\n    className: \"row justify-content-start text-start align-items-center m-0\"\n  }, __jsx(\"div\", {\n    className: \"col\"\n  }, __jsx(\"img\", {\n    src: \"/images/chat-logo1.png\",\n    alt: \"logo\"\n  })), __jsx(\"input\", {\n    className: \"btn btn-secondary ml-auto\",\n    type: \"button\",\n    value: \"Leave Room\",\n    onClick: onLeave\n  })), __jsx(\"div\", {\n    className: \"row justify-centent-between align-items-start secondary-bg flex-fill m-0\"\n  }, __jsx(ChatSidePanel, {\n    isVisible: isSidePanelVisible,\n    roomUsers: roomUsers\n  }), __jsx(\"button\", {\n    className: \"btn sidebar-toggle\",\n    onClick: function onClick() {\n      return setSidePanelVisibility(function (prev) {\n        return !prev;\n      });\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-chevron-\".concat(arrowDirection)\n  })), __jsx(\"div\", {\n    className: \"chat-box col-sm-9 white-bg\",\n    style: {\n      height: \"100%\"\n    }\n  }, messages.map(function (msg, index) {\n    return __jsx(ChatMessage, {\n      key: index,\n      message: msg\n    });\n  }), progress > 0 && __jsx(ProgressBar, {\n    progress: progress,\n    color: \"#3282b8\"\n  }), __jsx(\"div\", {\n    ref: ChatContainerEndRef\n  }))), __jsx(ChatMessageSendForm, {\n    handleMessageSend: handleMessageSend,\n    setProgress: setProgress\n  }));\n};\n\n_s(ChatSection, \"q0XX3YQsscjHjh5VlFokZtvJ4I0=\");\n\n_c = ChatSection;\nexport default ChatSection;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatSection\");","map":{"version":3,"names":["useEffect","useRef","useState","ChatMessage","ChatMessageSendForm","ChatSidePanel","ProgressBar","ChatSection","onSend","roomUsers","messages","onLeave","isSidePanelVisible","setSidePanelVisibility","arrowDirection","setArrowDirection","progress","setProgress","ChatContainerEndRef","window","addEventListener","innerWidth","removeEventListener","handleMessageSend","message","current","scrollIntoView","behavior","prev","height","map","msg","index"],"sources":["C:/Users/teldeeb/kitchen/Anomly/functions/components/Chat/ChatSection.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport ChatMessage from \"./ChatMessage\";\r\nimport ChatMessageSendForm from \"./ChatMessageSendForm\";\r\nimport ChatSidePanel from \"./ChatSidePanel\";\r\nimport \"../../styles/chatSection.scss\";\r\nimport ProgressBar from \"../ProgressBar\";\r\n\r\nconst ChatSection = ({ onSend, roomUsers, messages, onLeave }) => {\r\n    const [isSidePanelVisible, setSidePanelVisibility] = useState(true);\r\n    const [arrowDirection, setArrowDirection] = useState(\"up\");\r\n    const [progress, setProgress] = useState(0);\r\n    const ChatContainerEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", () => {\r\n            window.innerWidth >= 575 ? setSidePanelVisibility(true) : \"\";\r\n        });\r\n\r\n        // returned function will be called on component unmount\r\n        return () => {\r\n            window.removeEventListener(\"resize\", () => {});\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isSidePanelVisible) setArrowDirection(\"up\");\r\n        else setArrowDirection(\"down\");\r\n    }, [isSidePanelVisible]);\r\n\r\n    const handleMessageSend = (message) => {\r\n        // scroll to end of message window\r\n        ChatContainerEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n        onSend(message);\r\n    };\r\n\r\n    return (\r\n        <div className=\"chat-section container\">\r\n            <div className=\"row justify-content-start text-start align-items-center m-0\">\r\n                <div className=\"col\">\r\n                    <img src=\"/images/chat-logo1.png\" alt=\"logo\" />\r\n                </div>\r\n                <input\r\n                    className=\"btn btn-secondary ml-auto\"\r\n                    type=\"button\"\r\n                    value=\"Leave Room\"\r\n                    onClick={onLeave}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"row justify-centent-between align-items-start secondary-bg flex-fill m-0\">\r\n                {/*SidePanel */}\r\n                <ChatSidePanel\r\n                    isVisible={isSidePanelVisible}\r\n                    roomUsers={roomUsers}\r\n                />\r\n                <button\r\n                    className=\"btn sidebar-toggle\"\r\n                    onClick={() => setSidePanelVisibility((prev) => !prev)}>\r\n                    <i className={`fas fa-chevron-${arrowDirection}`}></i>\r\n                </button>\r\n\r\n                {/* MessageArea */}\r\n                <div\r\n                    className=\"chat-box col-sm-9 white-bg\"\r\n                    style={{ height: \"100%\" }}>\r\n                    {/* Message */}\r\n                    {messages.map((msg, index) => {\r\n                        return <ChatMessage key={index} message={msg} />;\r\n                    })}\r\n                    {/* /Message */}\r\n\r\n                    {/* Progress bar for any file sharing */}\r\n                    {progress > 0 && (\r\n                        <ProgressBar progress={progress} color={\"#3282b8\"} />\r\n                    )}\r\n                    <div ref={ChatContainerEndRef} />\r\n                </div>\r\n                {/* /MessageArea */}\r\n            </div>\r\n            <ChatMessageSendForm\r\n                handleMessageSend={handleMessageSend}\r\n                setProgress={setProgress}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatSection;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}